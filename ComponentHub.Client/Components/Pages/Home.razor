@page "/"
@using ComponentHub.Client.Components.Features.Components
@using ComponentHub.Domain.Api
@using ComponentHub.ApiClients.Models
@inject ISnackbar Snackbar
@inject Test Test;
@inject ComponentService ComponentService
@inject HttpClient HttpClient

<MudText>SomeText</MudText>


<MudButton OnClick="SendBadRequest">Submit Bad Request</MudButton>
<MudButton OnClick="Test.ShowSnackbar">Open Snackbar</MudButton>
<MudButton OnClick="SendValidRequest">Send Valid Request</MudButton>

<MudTextField @bind-Value="@_componentName"></MudTextField>


@code
{
    private string _componentName = "SomeComponent";
    
    private async Task SendBadRequest()
    {
        await HttpClient.PutAsJsonAsync(Endpoints.Components.Create, new CreateComponentRequest(){Name = "asddddddddddddddddddddddddddddddddddddddddddddddddddddd", SourceCode = "", Language = Language.JS});
    }

    private async Task OpenBar() => Snackbar.Add("Test", Severity.Error);

    private async Task SendValidRequest()
    {
        await ComponentService.CreateComponent(new CreateComponentRequest(){Name = _componentName, Language = Language.JS, SourceCode = "My Source SourceCode"});
    }


}

